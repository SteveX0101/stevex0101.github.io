<!DOCTYPE html>

<html lang="en-US">
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link rel="icon" href="icons/webicon.png" type="image/gif">
    <link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.1/normalize.css">
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gochi+Hand&display=swap" rel="stylesheet">
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=0.8">
    <title>Steve Xue</title>
    <canvas id="myCanvas"></canvas>
  </head>
  <body>
    <div class="container">
      <img class="icon" id="themebutton" src="icons/dark-button.svg" alt="button" onclick="toggletheme()" title="Toggle Theme">
      <h1 id="heading">Hello! I'm Steve!</h1>
      <p class="description">I am a Computer Science Student from Brooklyn, New York. I am currently learning Java. Check out my Github for my latest projects and interests.</p>
      <div class="links">
        <a class="link" href="https://github.com/SteveX0101" target="_blank">
          <img class="icon" src="icons/github-dark.svg" alt="github" title="Github">
        </a>
        <a class="link" href="mailto:xstevexue@gmail.com">
          <img class="icon" src="icons/email-dark.svg" alt="email" title="Email">
        </a>
      </div>
    </div>
    <script>
      var canvas = document.getElementById("myCanvas");
      var ctx = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;

      let darktheme = true,
          dark = "#9985FF",
          light = "#009F71",
          particlesArray;

      class Particle {
        constructor(){
          this.reset()
        }

        draw(){
          ctx.fillStyle = this.pcolor;
          ctx.globalAlpha = this.opacity;
          ctx.beginPath();
          ctx.arc(this.px,this.py,this.psize,0,2 * Math.PI);
          ctx.closePath();
          ctx.fill();
        }

        reset(){
          this.psize = getRandomInt(2,6);
          this.px = getRandomInt(this.psize * 2,canvas.width - (this.psize * 2));
          this.py = getRandomInt(this.psize * 2,canvas.height - (this.psize * 2));
          this.opacity = (Math.random() * (0.8 - 0.5)) + 0.5;
          this.pcolor = (Math.random() * (1 - 0.8)) + 0.8;
          this.decay = (Math.random() * (1 - 0.8)) + 0.8;
          this.movementX = (Math.random() < .5) ? -1 : 1;
          this.movementY = (Math.random() < .5) ? -1 : 1;
          this.psizerate = 0.4 * this.decay * getRandom(0.5,1);
        }

        update(){
          this.pcolor = (darktheme) ? dark : light;
          if (this.px >= canvas.width || this.px <= 0) {
            this.movementX *= -1;
          }
          if (this.py >= canvas.height || this.py <= 0) {
            this.movementY *= -1;
          }

          if (this.opacity > 0) {
            this.opacity -= 0.002 * this.decay;
            this.opacity = (this.opacity < 0) ? 0 : this.opacity;
            this.psize += this.psizerate;
            this.px += 0.6 * this.movementX;
            this.py += 0.6 * this.movementY;
          } else if (this.opacity == 0) {
            this.reset();
          }
          this.draw();
        }
      }

      function getRandom(min, max) {
        return ((Math.random() * (max - min)) + min);
      }

      function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min) + min);
      }

      function init() {
        particlesArray = [];
        let numOfparticles = Math.floor((canvas.width * canvas.height) / 100000);
        for (let i = 0; i < numOfparticles; ++i) {
          particlesArray.push(new Particle());
        }
      }

      function animate() {
        requestAnimationFrame(animate);
        ctx.clearRect(0,0,canvas.width,canvas.height);

        for (let i = 0; i < particlesArray.length; i++) {
          particlesArray[i].update();
        }
      }

      function reportWindowSize() {
        canvas = document.getElementById("myCanvas");
        ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        init();
      }

      window.onresize = reportWindowSize;

      init();
      animate();

      function toggletheme() {
        if (darktheme) {
          //Light theme
          document.body.style.backgroundColor = "#F2FFFF"; //BG color
          document.getElementById('heading').style.color = "#191919"; //Heading text color
          document.getElementById('heading').style.textShadow = "3px 5px #009F71"; //Heading text shadow color
          document.getElementsByClassName("description")[0].style.color = "#3D5866"; //Description color
          document.getElementsByClassName('icon')[1].src = "/icons/github-light.svg"; //Github icon
          document.getElementsByClassName('icon')[2].src = "/icons/email-light.svg"; //Email icon
          document.getElementsByClassName('icon')[0].src = "/icons/light-button.svg" //Change theme icon
          darktheme = false;
        } else {
          //Default dark theme
          document.body.style.backgroundColor = "#201F25"; //BG color
          document.getElementById('heading').style.color = "#FFFFFF"; //Heading text color
          document.getElementById('heading').style.textShadow = "3px 5px #9985FF"; //Heading text shadow color
          document.getElementsByClassName("description")[0].style.color = "#F5FFFA"; //Description color
          document.getElementsByClassName('icon')[1].src = "/icons/github-dark.svg"; //Github icon
          document.getElementsByClassName('icon')[2].src = "/icons/email-dark.svg"; //Email icon
          document.getElementsByClassName('icon')[0].src = "/icons/dark-button.svg"; //Change theme icon
          darktheme = true;
        }
      }
    </script>
  </body>
</html>
